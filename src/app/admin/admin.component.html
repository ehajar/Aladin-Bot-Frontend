<div class="container-fluid full-page">
  <div class="row ">
    <div class="col-12 mt-3 mb-5">
      <div class="titleHolder align-self-center">
        <h2>Welcome to the Admin Interface of Aladin-Bot</h2>
      </div>
    </div>

    <div class="col-12 text-center mb-2 filters">
      <h3>
        <fa-icon [icon]="icons.filters"></fa-icon>
        State Filters
      </h3>
      <button class="btn btn-primary mx-1" (click)="filters = null">
        <fa-icon [icon]="icons.list"></fa-icon>
        ALL
      </button>
      <button class="btn btn-danger mx-1" (click)="filters = REJECTED">
        <fa-icon [icon]="icons.reject"></fa-icon>
        DECLINED
      </button>
      <button class="btn btn-warning mx-1" (click)="filters = WAITING">
        <fa-icon [icon]="icons.waiting"></fa-icon>
        WAITING
      </button>
      <button class="btn btn-success mx-1" (click)="filters = VALID">
        <fa-icon [icon]="icons.accepted"></fa-icon>
        ACCEPTED
      </button>
    </div>
    <div class="col-12 text-center mb-5 filters">
      <h3>
        <fa-icon [icon]="icons.filters"></fa-icon>
        Language Filters
      </h3>
      <button class="btn btn-primary mx-1" (click)="langFilters = null">
        <fa-icon [icon]="icons.list"></fa-icon>
        ALL
      </button>
      <button class="btn btn-secondary mx-1" (click)="langFilters = ENGLISH">
        <fa-icon [icon]="icons.flag"></fa-icon>
        ENGLISH
      </button>
      <button class="btn btn-secondary mx-1" (click)="langFilters = FRENCH">
        <fa-icon [icon]="icons.flag"></fa-icon>
        FRENCH
      </button>

    </div>

    <div class="col-12">
      <div class="w-75 m-auto">
        <div class="flexer fw-bold">
          <div class="f-1">User Input</div>
          <div class="f-1 text-center">Bot Output</div>
          <div class="f-1 text-center">Language</div>
          <div class="f-1">Probability</div>
          <div class="fixed-w">
            Actions
          </div>
        </div>

        <ng-container *ngFor="let res of resList; let i = index">
          <div class="flexer p-2 " style="border-radius: 5px" *ngIf="displayCondition(res)" [class.bg-light]="i%2 == 1">
            <div class="f-1 align-self-center">{{res.input}}</div>
            <div class="f-1 align-self-center text-center">{{res.output.category}}</div>
            <div class="f-1 align-self-center text-center">{{res.lang}}</div>
            <div class="f-1 align-self-center">{{res.output.probability}}</div>
            <div class="fixed-w">
              <div>
                <button class="{{res.state == VALID? 'btn btn-success':'btn btn-outline-success'}}"
                        [disabled]="res.state == VALID"
                        (click)="changeState(res.id,0)">
                  <fa-icon [icon]="icons.accepted"></fa-icon>
                </button>
                <button
                  class="{{res.state == WAITING? 'btn mx-1 btn-warning':'btn mx-1 btn-outline-warning'}}"
                  [disabled]="res.state == WAITING"
                  (click)="changeState(res.id,2)">
                  <fa-icon [icon]="icons.waiting"></fa-icon>
                </button>
                <button
                  class="{{res.state == REJECTED? 'btn btn-danger':'btn btn-outline-danger'}}"
                  [disabled]="res.state == REJECTED"
                  (click)="changeState(res.id,1)">
                  <fa-icon [icon]="icons.reject"></fa-icon>
                </button>
              </div>
            </div>
          </div>
        </ng-container>

      </div>
    </div>

    <div class="col-6 mt-5 text-center filters">
      <fa-icon [icon]="icons.export" style="color:#9090cc" size="2x"></fa-icon>
      <h3> Export training Model</h3>
      <div>
        <button class="btn btn-primary " (click)="downloadFile('en')">Download File • EN</button>
      </div>
      <div class="my-3">
        <button class="btn btn-primary " (click)="downloadFile('fr')">Download File • FR</button>
      </div>
    </div>

    <div class="col-6 mt-5 text-center filters">
      <fa-icon [icon]="icons.import" style="color:#cc9090" size="2x"></fa-icon>
      <h3> Import training Model</h3>
      <div>
        <button class="btn btn-secondary" (click)="uploadFile(fileEn, 'en')">Upload File • EN</button>
        <input type="file" class="d-none" accept="text/plain" #fileEn>
      </div>
      <div class="my-3">
        <button class="btn btn-secondary" (click)="uploadFile(fileFr, 'fr')">Upload File • FR</button>
        <input type="file" class="d-none" accept="text/plain" #fileFr>
      </div>
    </div>

  </div>
</div>
